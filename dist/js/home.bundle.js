(()=>{var t={506:t=>{t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},926:t=>{function e(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}t.exports=function(t){return function(){var n=this,r=arguments;return new Promise((function(o,i){var a=t.apply(n,r);function c(t){e(a,o,i,c,s,"next",t)}function s(t){e(a,o,i,c,s,"throw",t)}c(void 0)}))}}},575:t=>{t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},913:t=>{function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}},754:t=>{function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(n)}t.exports=e},205:(t,e,n)=>{var r=n(489);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},585:(t,e,n)=>{var r=n(8),o=n(506);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?o(t):e}},489:t=>{function e(n,r){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(n,r)}t.exports=e},8:t=>{function e(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=e=function(t){return typeof t}:t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(n)}t.exports=e},757:(t,e,n)=>{t.exports=n(666)},666:t=>{var e=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof y?e:y,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r=f;return function(o,i){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===o)throw i;return P()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=E(a,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var s=l(t,e,n);if("normal"===s.type){if(r=n.done?d:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=d,n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f="suspendedStart",h="suspendedYield",p="executing",d="completed",v={};function y(){}function m(){}function g(){}var b={};b[i]=function(){return this};var x=Object.getPrototypeOf,w=x&&x(x(T([])));w&&w!==n&&r.call(w,i)&&(b=w);var L=g.prototype=y.prototype=Object.create(b);function j(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function n(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,c)}))}c(s.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function E(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=l(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function T(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:P}}function P(){return{value:e,done:!0}}return m.prototype=L.constructor=g,g.constructor=m,m.displayName=s(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,c,"GeneratorFunction")),t.prototype=Object.create(L),t},t.awrap=function(t){return{__await:t}},j(k.prototype),k.prototype[a]=function(){return this},t.AsyncIterator=k,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new k(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},j(L),s(L,c,"Generator"),L[i]=function(){return this},L.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}},e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=n(757),e=n.n(t),r=n(926),o=n.n(r),i=n(575),a=n.n(i),c=n(913),s=n.n(c),u=function(){function t(e){a()(this,t),this.api=e}var n,r,i,c;return s()(t,[{key:"fetchData",value:(c=o()(e().mark((function t(){var n,r,o,i=arguments;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.length>0&&void 0!==i[0]?i[0]:null,t.prev=1,!n){t.next=8;break}return t.next=5,fetch(this.api+n);case 5:r=t.sent,t.next=11;break;case 8:return t.next=10,fetch(this.api);case 10:r=t.sent;case 11:return t.next=13,r.json();case 13:return o=t.sent,t.abrupt("return",o);case 17:t.prev=17,t.t0=t.catch(1),console.error("La connection avec le serveur n'a pu être établie.\n"+t.t0);case 20:case"end":return t.stop()}}),t,this,[[1,17]])}))),function(){return c.apply(this,arguments)})},{key:"fetch",value:(i=o()(e().mark((function t(n){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetchData(n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"fetchAll",value:(r=o()(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetchData();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"send",value:(n=o()(e().mark((function t(n){var r,o;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(this.api,{method:"POST",body:JSON.stringify(n),headers:{"Content-type":"application/json; charset=UTF-8"}});case 2:return r=t.sent,o=r.json(),t.abrupt("return",o);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})}]),t}(),l=function(){function t(){a()(this,t),this.items=[],this.total=0,this.init()}return s()(t,[{key:"init",value:function(){if(localStorage.getItem("cart")){var t=JSON.parse(localStorage.getItem("cart"));this.items=t.items,this.total=t.total}}},{key:"addItem",value:function(t){var e=!1;this.items.map((function(n){n.id===t.id&&(n.quantity+=t.quantity,e=!0)})),e||this.items.push(t),this.save()}},{key:"removeItem",value:function(t){this.items=this.items.filter((function(e){return e.id!==t})),this.save()}},{key:"updateItem",value:function(t,e){this.items.map((function(n){n.id===t&&(n.quantity=e)})),this.save()}},{key:"setTotal",value:function(){this.total=this.items.reduce((function(t,e){return t+e.quantity*e.price}),0)}},{key:"save",value:function(){this.setTotal();var t={items:this.items,total:this.total};localStorage.setItem("cart",JSON.stringify(t))}},{key:"clear",value:function(){this.items=[],this.total=0,localStorage.clear()}},{key:"getCount",value:function(){return this.items.length}},{key:"getData",value:function(){return{items:this.items,total:this.total}}},{key:"getItems",value:function(){return this.items.map((function(t){return t.id}))}}]),t}(),f=n(205),h=n.n(f),p=n(585),d=n.n(p),v=n(754),y=n.n(v);function m(t){return(t/=100).toFixed(2)+" €"}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=y()(t);if(e){var o=y()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}var b=function(){function t(e){a()(this,t),this.template=null,this.content=e}return s()(t,[{key:"injectTo",value:function(t){this.toHTML(),t.appendChild(this.template)}},{key:"onAdd",value:function(t){var e=this.template.querySelector(".js-buy"),n=this.template.querySelector(".js-quantity");e.addEventListener("click",t),this instanceof w&&n.addEventListener("change",(function(t){t.target.value<1&&(t.target.value=1),e.dataset.quantity=t.target.value}))}}]),t}(),x=function(t){h()(n,t);var e=g(n);function n(t){return a()(this,n),e.call(this,t)}return s()(n,[{key:"toHTML",value:function(){this.template=document.createElement("div"),this.template.innerHTML='\n      <h2 class="ml-2 mb-2 text-xl font-semibold">Peluche "'.concat(this.content.name,'"</h2>\n      <div class="image-responsive rounded-xl overflow-hidden">\n        <img\n          class="absolute inset-0 h-full w-full object-cover"\n          src="').concat(this.content.imageUrl,'"\n          alt="').concat(this.content.name,'"\n        />\n      </div>\n      <div class="flex mt-6">\n        <span class="inline-flex flex-1 items-center justify-center bg-white rounded-md text-xl sm:text-2xl font-semibold">\n          ').concat(m(this.content.price),'\n      </span>\n        <a href="item.html?id=').concat(this.content._id,'" class="inline-block ml-2 px-4 py-2 rounded-md bg-gray-200 hover:bg-gray-300">Détails</a>\n        <button \n          class="js-buy inline-block bg-blue-200 text-blue-900 ml-2 px-4 py-2 rounded-md hover:bg-blue-300"\n          data-id="').concat(this.content._id,'"\n          data-name="').concat(this.content.name,'"\n          data-price="').concat(this.content.price,'"\n          data-quantity="1"\n        >\n          Ajouter\n        </button>\n      </div>\n    ')}}]),n}(b),w=function(t){h()(n,t);var e=g(n);function n(t){return a()(this,n),e.call(this,t)}return s()(n,[{key:"toHTML",value:function(){this.template=document.createElement("div"),this.template.classList.add("md:flex","md:gap-12"),this.template.innerHTML='\n      <div class="relative rounded-xl overflow-hidden md:w-2/4">\n        <img class="w-full h-full object-cover"\n          src="'.concat(this.content.imageUrl,'"\n          alt="').concat(this.content.name,'"\n        />\n      </div>\n      <div class="flex flex-col md:w-2/4">\n        <div>\n          <p class="mt-4 md:mt-0">\n            <strong>Description:</strong> ').concat(this.content.description,'\n          </p>\n        </div>\n        <div class="mt-8 flex justify-between items-center">\n          <label class="text-sm font-semibold" for="color">Couleur:</label>\n          <div id="selector" class="relative w-1/2">\n            <select\n              id="selector"\n              class="block w-full p-2 appearance-none bg-transparent border-b"\n              name="color"\n            >\n              ').concat(this.content.colors.map((function(t){return'<option name="'.concat(t,'">').concat(t,"</option>")})),'\n            </select>\n          </div>\n        </div>\n        <div class="flex justify-between items-center mt-6">\n          <label for="quantity" class="text-sm font-semibold">Quantité:</label>\n          <input type="number" min="1" value="1" id="quantity" class="js-quantity inline-block w-1/4 p-2 bg-transparent border-b text-center"/>\n        </div>\n        <div class="flex gap-4 justify-between mt-16 lg:mt-auto">\n          <span class="inline-flex flex-1 items-center justify-center bg-white rounded-md text-xl text-2xl font-semibold">\n            ').concat(m(this.content.price),'\n          </span>\n          <button \n            class="js-buy inline-block bg-blue-200 text-blue-900 px-4 py-2 rounded-md hover:bg-blue-300"\n            data-id="').concat(this.content._id,'"\n            data-name="').concat(this.content.name,'"\n            data-price="').concat(this.content.price,'"\n            data-quantity="1"\n          >\n            Ajouter\n          </button>\n        </div>\n      </div>\n    ')}}]),n}(b),L=new u("http://localhost:3000/api/teddies"),j=new l;L.fetchAll().then((function(t){var e=document.querySelector("#home");e.innerHTML="",t.forEach((function(t){var n=new x(t);n.injectTo(e),n.onAdd((function(t){var e,n={id:t.target.dataset.id,name:t.target.dataset.name,quantity:parseInt(t.target.dataset.quantity),price:parseInt(t.target.dataset.price)};j.addItem(n),(e=document.querySelector("#cart-btn")).classList.add("animate"),e.addEventListener("animationend",(function(t){t.target.classList.remove("animate")}))}))}))}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcmlub2NvLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXNzZXJ0VGhpc0luaXRpYWxpemVkLmpzIiwid2VicGFjazovL29yaW5vY28vLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3luY1RvR2VuZXJhdG9yLmpzIiwid2VicGFjazovL29yaW5vY28vLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjay5qcyIsIndlYnBhY2s6Ly9vcmlub2NvLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MuanMiLCJ3ZWJwYWNrOi8vb3Jpbm9jby8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2dldFByb3RvdHlwZU9mLmpzIiwid2VicGFjazovL29yaW5vY28vLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbmhlcml0cy5qcyIsIndlYnBhY2s6Ly9vcmlub2NvLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybi5qcyIsIndlYnBhY2s6Ly9vcmlub2NvLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvc2V0UHJvdG90eXBlT2YuanMiLCJ3ZWJwYWNrOi8vb3Jpbm9jby8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3R5cGVvZi5qcyIsIndlYnBhY2s6Ly9vcmlub2NvLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yL2luZGV4LmpzIiwid2VicGFjazovL29yaW5vY28vLi9ub2RlX21vZHVsZXMvcmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIiwid2VicGFjazovL29yaW5vY28vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vb3Jpbm9jby93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9vcmlub2NvL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9vcmlub2NvL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vb3Jpbm9jby8uL3NyYy9qcy9tb2R1bGVzL0RhdGFNYW5hZ2VyLmpzIiwid2VicGFjazovL29yaW5vY28vLi9zcmMvanMvbW9kdWxlcy9DYXJ0TWFuYWdlci5qcyIsIndlYnBhY2s6Ly9vcmlub2NvLy4vc3JjL2pzL3V0aWxzLmpzIiwid2VicGFjazovL29yaW5vY28vLi9zcmMvanMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL29yaW5vY28vLi9zcmMvanMvaG9tZS5qcyJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwic2VsZiIsIlJlZmVyZW5jZUVycm9yIiwiYXN5bmNHZW5lcmF0b3JTdGVwIiwiZ2VuIiwicmVzb2x2ZSIsInJlamVjdCIsIl9uZXh0IiwiX3Rocm93Iiwia2V5IiwiYXJnIiwiaW5mbyIsInZhbHVlIiwiZXJyb3IiLCJkb25lIiwiUHJvbWlzZSIsInRoZW4iLCJmbiIsInRoaXMiLCJhcmdzIiwiYXJndW1lbnRzIiwiYXBwbHkiLCJlcnIiLCJ1bmRlZmluZWQiLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2RlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJfZ2V0UHJvdG90eXBlT2YiLCJvIiwic2V0UHJvdG90eXBlT2YiLCJnZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsImNyZWF0ZSIsImNvbnN0cnVjdG9yIiwiX3R5cGVvZiIsImFzc2VydFRoaXNJbml0aWFsaXplZCIsImNhbGwiLCJfc2V0UHJvdG90eXBlT2YiLCJwIiwib2JqIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJydW50aW1lIiwiT3AiLCJoYXNPd24iLCJoYXNPd25Qcm9wZXJ0eSIsIiRTeW1ib2wiLCJpdGVyYXRvclN5bWJvbCIsImFzeW5jSXRlcmF0b3JTeW1ib2wiLCJhc3luY0l0ZXJhdG9yIiwidG9TdHJpbmdUYWdTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsImRlZmluZSIsIndyYXAiLCJpbm5lckZuIiwib3V0ZXJGbiIsInRyeUxvY3NMaXN0IiwicHJvdG9HZW5lcmF0b3IiLCJHZW5lcmF0b3IiLCJnZW5lcmF0b3IiLCJjb250ZXh0IiwiQ29udGV4dCIsIl9pbnZva2UiLCJzdGF0ZSIsIkdlblN0YXRlU3VzcGVuZGVkU3RhcnQiLCJtZXRob2QiLCJHZW5TdGF0ZUV4ZWN1dGluZyIsIkVycm9yIiwiR2VuU3RhdGVDb21wbGV0ZWQiLCJkb25lUmVzdWx0IiwiZGVsZWdhdGUiLCJkZWxlZ2F0ZVJlc3VsdCIsIm1heWJlSW52b2tlRGVsZWdhdGUiLCJDb250aW51ZVNlbnRpbmVsIiwic2VudCIsIl9zZW50IiwiZGlzcGF0Y2hFeGNlcHRpb24iLCJhYnJ1cHQiLCJyZWNvcmQiLCJ0cnlDYXRjaCIsInR5cGUiLCJHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkIiwibWFrZUludm9rZU1ldGhvZCIsIkdlbmVyYXRvckZ1bmN0aW9uIiwiR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUiLCJJdGVyYXRvclByb3RvdHlwZSIsImdldFByb3RvIiwiTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUiLCJ2YWx1ZXMiLCJHcCIsImRlZmluZUl0ZXJhdG9yTWV0aG9kcyIsImZvckVhY2giLCJBc3luY0l0ZXJhdG9yIiwiUHJvbWlzZUltcGwiLCJpbnZva2UiLCJyZXN1bHQiLCJfX2F3YWl0IiwidW53cmFwcGVkIiwicHJldmlvdXNQcm9taXNlIiwiY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmciLCJyZXN1bHROYW1lIiwibmV4dCIsIm5leHRMb2MiLCJwdXNoVHJ5RW50cnkiLCJsb2NzIiwiZW50cnkiLCJ0cnlMb2MiLCJjYXRjaExvYyIsImZpbmFsbHlMb2MiLCJhZnRlckxvYyIsInRyeUVudHJpZXMiLCJwdXNoIiwicmVzZXRUcnlFbnRyeSIsImNvbXBsZXRpb24iLCJyZXNldCIsIml0ZXJhYmxlIiwiaXRlcmF0b3JNZXRob2QiLCJpc05hTiIsImRpc3BsYXlOYW1lIiwiaXNHZW5lcmF0b3JGdW5jdGlvbiIsImdlbkZ1biIsImN0b3IiLCJuYW1lIiwibWFyayIsImF3cmFwIiwiYXN5bmMiLCJpdGVyIiwidG9TdHJpbmciLCJrZXlzIiwib2JqZWN0IiwicmV2ZXJzZSIsInBvcCIsInNraXBUZW1wUmVzZXQiLCJwcmV2IiwiY2hhckF0Iiwic2xpY2UiLCJzdG9wIiwicm9vdFJlY29yZCIsInJ2YWwiLCJleGNlcHRpb24iLCJoYW5kbGUiLCJsb2MiLCJjYXVnaHQiLCJoYXNDYXRjaCIsImhhc0ZpbmFsbHkiLCJmaW5hbGx5RW50cnkiLCJjb21wbGV0ZSIsImZpbmlzaCIsInRocm93biIsImRlbGVnYXRlWWllbGQiLCJyZWdlbmVyYXRvclJ1bnRpbWUiLCJhY2NpZGVudGFsU3RyaWN0TW9kZSIsIkZ1bmN0aW9uIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm4iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJkZWZpbml0aW9uIiwiZ2V0IiwicHJvcCIsImFwaSIsImlkIiwiZmV0Y2giLCJyZXNwb25zZSIsImpzb24iLCJkYXRhIiwiY29uc29sZSIsImZldGNoRGF0YSIsIm9yZGVyIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJoZWFkZXJzIiwicmVxdWVzdCIsIml0ZW1zIiwidG90YWwiLCJpbml0IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImNhcnQiLCJwYXJzZSIsIm5ld0l0ZW0iLCJkdXBsaWNhdGUiLCJtYXAiLCJpdGVtIiwicXVhbnRpdHkiLCJzYXZlIiwiZmlsdGVyIiwicmVkdWNlIiwiY3VycmVudCIsInByaWNlIiwic2V0VG90YWwiLCJjYXJ0SW5mb3JtYXRpb25zIiwic2V0SXRlbSIsImNsZWFyIiwiZm9ybWF0UHJpY2UiLCJ0b0ZpeGVkIiwiQ2FyZCIsInRlbXBsYXRlIiwiY29udGVudCIsIm1vdW50UG9pbnQiLCJ0b0hUTUwiLCJhcHBlbmRDaGlsZCIsImNiIiwiYnV5QnRuIiwicXVlcnlTZWxlY3RvciIsInF0eUJ0biIsImFkZEV2ZW50TGlzdGVuZXIiLCJDYXJkRGV0YWlscyIsImUiLCJkYXRhc2V0IiwiQ2FyZFByZXZpZXciLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJpbWFnZVVybCIsIl9pZCIsImNsYXNzTGlzdCIsImFkZCIsImRlc2NyaXB0aW9uIiwiY29sb3JzIiwiY29sb3IiLCJEYXRhTWFuYWdlciIsIkNhcnRNYW5hZ2VyIiwiZmV0Y2hBbGwiLCJob21lIiwiY2FyZCIsImluamVjdFRvIiwib25BZGQiLCJldmVudCIsImNhcnRCdG4iLCJwYXJzZUludCIsImFkZEl0ZW0iLCJyZW1vdmUiXSwibWFwcGluZ3MiOiJxQkFRQUEsRUFBT0MsUUFSUCxTQUFnQ0MsR0FDOUIsUUFBYSxJQUFUQSxFQUNGLE1BQU0sSUFBSUMsZUFBZSw2REFHM0IsT0FBT0QsSSxRQ0xULFNBQVNFLEVBQW1CQyxFQUFLQyxFQUFTQyxFQUFRQyxFQUFPQyxFQUFRQyxFQUFLQyxHQUNwRSxJQUNFLElBQUlDLEVBQU9QLEVBQUlLLEdBQUtDLEdBQ2hCRSxFQUFRRCxFQUFLQyxNQUNqQixNQUFPQyxHQUVQLFlBREFQLEVBQU9PLEdBSUxGLEVBQUtHLEtBQ1BULEVBQVFPLEdBRVJHLFFBQVFWLFFBQVFPLEdBQU9JLEtBQUtULEVBQU9DLEdBd0J2Q1QsRUFB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Mk0sUUFBUTdGLEtBQzNCb0UsU0FBVThDLFNBQVNGLEVBQU05TixPQUFPMk0sUUFBUXpCLFVBQ3hDSyxNQUFPeUMsU0FBU0YsRUFBTTlOLE9BQU8yTSxRQUFRcEIsUUFHdkNYLEVBQUtxRCxRQUFRaEQsSUZWYjhDLEVBQVVsQixTQUFTUCxjQUFjLGNBRy9CWSxVQUFVQyxJQUFJLFdBR3RCWSxFQUFRdkIsaUJBQWlCLGdCQUFnQixTQUFDc0IsR0FDeENBLEVBQU05TixPQUFPa04sVUFBVWdCLE9BQU8sd0IiLCJmaWxlIjoiaG9tZS5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHtcbiAgaWYgKHNlbGYgPT09IHZvaWQgMCkge1xuICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtcbiAgfVxuXG4gIHJldHVybiBzZWxmO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQ7IiwiZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykge1xuICB0cnkge1xuICAgIHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTtcbiAgICB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlamVjdChlcnJvcik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGluZm8uZG9uZSkge1xuICAgIHJlc29sdmUodmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcyxcbiAgICAgICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpO1xuXG4gICAgICBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkge1xuICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIFwibmV4dFwiLCB2YWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIF90aHJvdyhlcnIpIHtcbiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBcInRocm93XCIsIGVycik7XG4gICAgICB9XG5cbiAgICAgIF9uZXh0KHVuZGVmaW5lZCk7XG4gICAgfSk7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2FzeW5jVG9HZW5lcmF0b3I7IiwiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfY2xhc3NDYWxsQ2hlY2s7IiwiZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgcmV0dXJuIENvbnN0cnVjdG9yO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9jcmVhdGVDbGFzczsiLCJmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2Yobykge1xuICBtb2R1bGUuZXhwb3J0cyA9IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7XG4gICAgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTtcbiAgfTtcbiAgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfZ2V0UHJvdG90eXBlT2Y7IiwidmFyIHNldFByb3RvdHlwZU9mID0gcmVxdWlyZShcIi4vc2V0UHJvdG90eXBlT2ZcIik7XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO1xuICB9XG5cbiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7XG4gICAgY29uc3RydWN0b3I6IHtcbiAgICAgIHZhbHVlOiBzdWJDbGFzcyxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfVxuICB9KTtcbiAgaWYgKHN1cGVyQ2xhc3MpIHNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfaW5oZXJpdHM7IiwidmFyIF90eXBlb2YgPSByZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy90eXBlb2ZcIik7XG5cbnZhciBhc3NlcnRUaGlzSW5pdGlhbGl6ZWQgPSByZXF1aXJlKFwiLi9hc3NlcnRUaGlzSW5pdGlhbGl6ZWRcIik7XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHtcbiAgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikpIHtcbiAgICByZXR1cm4gY2FsbDtcbiAgfVxuXG4gIHJldHVybiBhc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm47IiwiZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHtcbiAgICBvLl9fcHJvdG9fXyA9IHA7XG4gICAgcmV0dXJuIG87XG4gIH07XG5cbiAgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfc2V0UHJvdG90eXBlT2Y7IiwiZnVuY3Rpb24gX3R5cGVvZihvYmopIHtcbiAgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiO1xuXG4gIGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikge1xuICAgIG1vZHVsZS5leHBvcnRzID0gX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIG9iajtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIG1vZHVsZS5leHBvcnRzID0gX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7XG4gICAgICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIF90eXBlb2Yob2JqKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfdHlwZW9mOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInJlZ2VuZXJhdG9yLXJ1bnRpbWVcIik7XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbnZhciBydW50aW1lID0gKGZ1bmN0aW9uIChleHBvcnRzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBPcCA9IE9iamVjdC5wcm90b3R5cGU7XG4gIHZhciBoYXNPd24gPSBPcC5oYXNPd25Qcm9wZXJ0eTtcbiAgdmFyIHVuZGVmaW5lZDsgLy8gTW9yZSBjb21wcmVzc2libGUgdGhhbiB2b2lkIDAuXG4gIHZhciAkU3ltYm9sID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiID8gU3ltYm9sIDoge307XG4gIHZhciBpdGVyYXRvclN5bWJvbCA9ICRTeW1ib2wuaXRlcmF0b3IgfHwgXCJAQGl0ZXJhdG9yXCI7XG4gIHZhciBhc3luY0l0ZXJhdG9yU3ltYm9sID0gJFN5bWJvbC5hc3luY0l0ZXJhdG9yIHx8IFwiQEBhc3luY0l0ZXJhdG9yXCI7XG4gIHZhciB0b1N0cmluZ1RhZ1N5bWJvbCA9ICRTeW1ib2wudG9TdHJpbmdUYWcgfHwgXCJAQHRvU3RyaW5nVGFnXCI7XG5cbiAgZnVuY3Rpb24gZGVmaW5lKG9iaiwga2V5LCB2YWx1ZSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIG9ialtrZXldO1xuICB9XG4gIHRyeSB7XG4gICAgLy8gSUUgOCBoYXMgYSBicm9rZW4gT2JqZWN0LmRlZmluZVByb3BlcnR5IHRoYXQgb25seSB3b3JrcyBvbiBET00gb2JqZWN0cy5cbiAgICBkZWZpbmUoe30sIFwiXCIpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBkZWZpbmUgPSBmdW5jdGlvbihvYmosIGtleSwgdmFsdWUpIHtcbiAgICAgIHJldHVybiBvYmpba2V5XSA9IHZhbHVlO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSB7XG4gICAgLy8gSWYgb3V0ZXJGbiBwcm92aWRlZCBhbmQgb3V0ZXJGbi5wcm90b3R5cGUgaXMgYSBHZW5lcmF0b3IsIHRoZW4gb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IuXG4gICAgdmFyIHByb3RvR2VuZXJhdG9yID0gb3V0ZXJGbiAmJiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvciA/IG91dGVyRm4gOiBHZW5lcmF0b3I7XG4gICAgdmFyIGdlbmVyYXRvciA9IE9iamVjdC5jcmVhdGUocHJvdG9HZW5lcmF0b3IucHJvdG90eXBlKTtcbiAgICB2YXIgY29udGV4dCA9IG5ldyBDb250ZXh0KHRyeUxvY3NMaXN0IHx8IFtdKTtcblxuICAgIC8vIFRoZSAuX2ludm9rZSBtZXRob2QgdW5pZmllcyB0aGUgaW1wbGVtZW50YXRpb25zIG9mIHRoZSAubmV4dCxcbiAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMuXG4gICAgZ2VuZXJhdG9yLl9pbnZva2UgPSBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuXG4gICAgcmV0dXJuIGdlbmVyYXRvcjtcbiAgfVxuICBleHBvcnRzLndyYXAgPSB3cmFwO1xuXG4gIC8vIFRyeS9jYXRjaCBoZWxwZXIgdG8gbWluaW1pemUgZGVvcHRpbWl6YXRpb25zLiBSZXR1cm5zIGEgY29tcGxldGlvblxuICAvLyByZWNvcmQgbGlrZSBjb250ZXh0LnRyeUVudHJpZXNbaV0uY29tcGxldGlvbi4gVGhpcyBpbnRlcmZhY2UgY291bGRcbiAgLy8gaGF2ZSBiZWVuIChhbmQgd2FzIHByZXZpb3VzbHkpIGRlc2lnbmVkIHRvIHRha2UgYSBjbG9zdXJlIHRvIGJlXG4gIC8vIGludm9rZWQgd2l0aG91dCBhcmd1bWVudHMsIGJ1dCBpbiBhbGwgdGhlIGNhc2VzIHdlIGNhcmUgYWJvdXQgd2VcbiAgLy8gYWxyZWFkeSBoYXZlIGFuIGV4aXN0aW5nIG1ldGhvZCB3ZSB3YW50IHRvIGNhbGwsIHNvIHRoZXJlJ3Mgbm8gbmVlZFxuICAvLyB0byBjcmVhdGUgYSBuZXcgZnVuY3Rpb24gb2JqZWN0LiBXZSBjYW4gZXZlbiBnZXQgYXdheSB3aXRoIGFzc3VtaW5nXG4gIC8vIHRoZSBtZXRob2QgdGFrZXMgZXhhY3RseSBvbmUgYXJndW1lbnQsIHNpbmNlIHRoYXQgaGFwcGVucyB0byBiZSB0cnVlXG4gIC8vIGluIGV2ZXJ5IGNhc2UsIHNvIHdlIGRvbid0IGhhdmUgdG8gdG91Y2ggdGhlIGFyZ3VtZW50cyBvYmplY3QuIFRoZVxuICAvLyBvbmx5IGFkZGl0aW9uYWwgYWxsb2NhdGlvbiByZXF1aXJlZCBpcyB0aGUgY29tcGxldGlvbiByZWNvcmQsIHdoaWNoXG4gIC8vIGhhcyBhIHN0YWJsZSBzaGFwZSBhbmQgc28gaG9wZWZ1bGx5IHNob3VsZCBiZSBjaGVhcCB0byBhbGxvY2F0ZS5cbiAgZnVuY3Rpb24gdHJ5Q2F0Y2goZm4sIG9iaiwgYXJnKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwibm9ybWFsXCIsIGFyZzogZm4uY2FsbChvYmosIGFyZykgfTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwidGhyb3dcIiwgYXJnOiBlcnIgfTtcbiAgICB9XG4gIH1cblxuICB2YXIgR2VuU3RhdGVTdXNwZW5kZWRTdGFydCA9IFwic3VzcGVuZGVkU3RhcnRcIjtcbiAgdmFyIEdlblN0YXRlU3VzcGVuZGVkWWllbGQgPSBcInN1c3BlbmRlZFlpZWxkXCI7XG4gIHZhciBHZW5TdGF0ZUV4ZWN1dGluZyA9IFwiZXhlY3V0aW5nXCI7XG4gIHZhciBHZW5TdGF0ZUNvbXBsZXRlZCA9IFwiY29tcGxldGVkXCI7XG5cbiAgLy8gUmV0dXJuaW5nIHRoaXMgb2JqZWN0IGZyb20gdGhlIGlubmVyRm4gaGFzIHRoZSBzYW1lIGVmZmVjdCBhc1xuICAvLyBicmVha2luZyBvdXQgb2YgdGhlIGRpc3BhdGNoIHN3aXRjaCBzdGF0ZW1lbnQuXG4gIHZhciBDb250aW51ZVNlbnRpbmVsID0ge307XG5cbiAgLy8gRHVtbXkgY29uc3RydWN0b3IgZnVuY3Rpb25zIHRoYXQgd2UgdXNlIGFzIHRoZSAuY29uc3RydWN0b3IgYW5kXG4gIC8vIC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgcHJvcGVydGllcyBmb3IgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIEdlbmVyYXRvclxuICAvLyBvYmplY3RzLiBGb3IgZnVsbCBzcGVjIGNvbXBsaWFuY2UsIHlvdSBtYXkgd2lzaCB0byBjb25maWd1cmUgeW91clxuICAvLyBtaW5pZmllciBub3QgdG8gbWFuZ2xlIHRoZSBuYW1lcyBvZiB0aGVzZSB0d28gZnVuY3Rpb25zLlxuICBmdW5jdGlvbiBHZW5lcmF0b3IoKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKCkge31cblxuICAvLyBUaGlzIGlzIGEgcG9seWZpbGwgZm9yICVJdGVyYXRvclByb3RvdHlwZSUgZm9yIGVudmlyb25tZW50cyB0aGF0XG4gIC8vIGRvbid0IG5hdGl2ZWx5IHN1cHBvcnQgaXQuXG4gIHZhciBJdGVyYXRvclByb3RvdHlwZSA9IHt9O1xuICBJdGVyYXRvclByb3RvdHlwZVtpdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgdmFyIGdldFByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xuICB2YXIgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgPSBnZXRQcm90byAmJiBnZXRQcm90byhnZXRQcm90byh2YWx1ZXMoW10pKSk7XG4gIGlmIChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAmJlxuICAgICAgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgIT09IE9wICYmXG4gICAgICBoYXNPd24uY2FsbChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSwgaXRlcmF0b3JTeW1ib2wpKSB7XG4gICAgLy8gVGhpcyBlbnZpcm9ubWVudCBoYXMgYSBuYXRpdmUgJUl0ZXJhdG9yUHJvdG90eXBlJTsgdXNlIGl0IGluc3RlYWRcbiAgICAvLyBvZiB0aGUgcG9seWZpbGwuXG4gICAgSXRlcmF0b3JQcm90b3R5cGUgPSBOYXRpdmVJdGVyYXRvclByb3RvdHlwZTtcbiAgfVxuXG4gIHZhciBHcCA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLnByb3RvdHlwZSA9XG4gICAgR2VuZXJhdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoSXRlcmF0b3JQcm90b3R5cGUpO1xuICBHZW5lcmF0b3JGdW5jdGlvbi5wcm90b3R5cGUgPSBHcC5jb25zdHJ1Y3RvciA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEdlbmVyYXRvckZ1bmN0aW9uO1xuICBHZW5lcmF0b3JGdW5jdGlvbi5kaXNwbGF5TmFtZSA9IGRlZmluZShcbiAgICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSxcbiAgICB0b1N0cmluZ1RhZ1N5bWJvbCxcbiAgICBcIkdlbmVyYXRvckZ1bmN0aW9uXCJcbiAgKTtcblxuICAvLyBIZWxwZXIgZm9yIGRlZmluaW5nIHRoZSAubmV4dCwgLnRocm93LCBhbmQgLnJldHVybiBtZXRob2RzIG9mIHRoZVxuICAvLyBJdGVyYXRvciBpbnRlcmZhY2UgaW4gdGVybXMgb2YgYSBzaW5nbGUgLl9pbnZva2UgbWV0aG9kLlxuICBmdW5jdGlvbiBkZWZpbmVJdGVyYXRvck1ldGhvZHMocHJvdG90eXBlKSB7XG4gICAgW1wibmV4dFwiLCBcInRocm93XCIsIFwicmV0dXJuXCJdLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICBkZWZpbmUocHJvdG90eXBlLCBtZXRob2QsIGZ1bmN0aW9uKGFyZykge1xuICAgICAgICByZXR1cm4gdGhpcy5faW52b2tlKG1ldGhvZCwgYXJnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZXhwb3J0cy5pc0dlbmVyYXRvckZ1bmN0aW9uID0gZnVuY3Rpb24oZ2VuRnVuKSB7XG4gICAgdmFyIGN0b3IgPSB0eXBlb2YgZ2VuRnVuID09PSBcImZ1bmN0aW9uXCIgJiYgZ2VuRnVuLmNvbnN0cnVjdG9yO1xuICAgIHJldHVybiBjdG9yXG4gICAgICA/IGN0b3IgPT09IEdlbmVyYXRvckZ1bmN0aW9uIHx8XG4gICAgICAgIC8vIEZvciB0aGUgbmF0aXZlIEdlbmVyYXRvckZ1bmN0aW9uIGNvbnN0cnVjdG9yLCB0aGUgYmVzdCB3ZSBjYW5cbiAgICAgICAgLy8gZG8gaXMgdG8gY2hlY2sgaXRzIC5uYW1lIHByb3BlcnR5LlxuICAgICAgICAoY3Rvci5kaXNwbGF5TmFtZSB8fCBjdG9yLm5hbWUpID09PSBcIkdlbmVyYXRvckZ1bmN0aW9uXCJcbiAgICAgIDogZmFsc2U7XG4gIH07XG5cbiAgZXhwb3J0cy5tYXJrID0gZnVuY3Rpb24oZ2VuRnVuKSB7XG4gICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGdlbkZ1biwgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBnZW5GdW4uX19wcm90b19fID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGU7XG4gICAgICBkZWZpbmUoZ2VuRnVuLCB0b1N0cmluZ1RhZ1N5bWJvbCwgXCJHZW5lcmF0b3JGdW5jdGlvblwiKTtcbiAgICB9XG4gICAgZ2VuRnVuLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoR3ApO1xuICAgIHJldHVybiBnZW5GdW47XG4gIH07XG5cbiAgLy8gV2l0aGluIHRoZSBib2R5IG9mIGFueSBhc3luYyBmdW5jdGlvbiwgYGF3YWl0IHhgIGlzIHRyYW5zZm9ybWVkIHRvXG4gIC8vIGB5aWVsZCByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoeClgLCBzbyB0aGF0IHRoZSBydW50aW1lIGNhbiB0ZXN0XG4gIC8vIGBoYXNPd24uY2FsbCh2YWx1ZSwgXCJfX2F3YWl0XCIpYCB0byBkZXRlcm1pbmUgaWYgdGhlIHlpZWxkZWQgdmFsdWUgaXNcbiAgLy8gbWVhbnQgdG8gYmUgYXdhaXRlZC5cbiAgZXhwb3J0cy5hd3JhcCA9IGZ1bmN0aW9uKGFyZykge1xuICAgIHJldHVybiB7IF9fYXdhaXQ6IGFyZyB9O1xuICB9O1xuXG4gIGZ1bmN0aW9uIEFzeW5jSXRlcmF0b3IoZ2VuZXJhdG9yLCBQcm9taXNlSW1wbCkge1xuICAgIGZ1bmN0aW9uIGludm9rZShtZXRob2QsIGFyZywgcmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2goZ2VuZXJhdG9yW21ldGhvZF0sIGdlbmVyYXRvciwgYXJnKTtcbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHJlamVjdChyZWNvcmQuYXJnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciByZXN1bHQgPSByZWNvcmQuYXJnO1xuICAgICAgICB2YXIgdmFsdWUgPSByZXN1bHQudmFsdWU7XG4gICAgICAgIGlmICh2YWx1ZSAmJlxuICAgICAgICAgICAgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICBoYXNPd24uY2FsbCh2YWx1ZSwgXCJfX2F3YWl0XCIpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2VJbXBsLnJlc29sdmUodmFsdWUuX19hd2FpdCkudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaW52b2tlKFwibmV4dFwiLCB2YWx1ZSwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIGludm9rZShcInRocm93XCIsIGVyciwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlSW1wbC5yZXNvbHZlKHZhbHVlKS50aGVuKGZ1bmN0aW9uKHVud3JhcHBlZCkge1xuICAgICAgICAgIC8vIFdoZW4gYSB5aWVsZGVkIFByb21pc2UgaXMgcmVzb2x2ZWQsIGl0cyBmaW5hbCB2YWx1ZSBiZWNvbWVzXG4gICAgICAgICAgLy8gdGhlIC52YWx1ZSBvZiB0aGUgUHJvbWlzZTx7dmFsdWUsZG9uZX0+IHJlc3VsdCBmb3IgdGhlXG4gICAgICAgICAgLy8gY3VycmVudCBpdGVyYXRpb24uXG4gICAgICAgICAgcmVzdWx0LnZhbHVlID0gdW53cmFwcGVkO1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAvLyBJZiBhIHJlamVjdGVkIFByb21pc2Ugd2FzIHlpZWxkZWQsIHRocm93IHRoZSByZWplY3Rpb24gYmFja1xuICAgICAgICAgIC8vIGludG8gdGhlIGFzeW5jIGdlbmVyYXRvciBmdW5jdGlvbiBzbyBpdCBjYW4gYmUgaGFuZGxlZCB0aGVyZS5cbiAgICAgICAgICByZXR1cm4gaW52b2tlKFwidGhyb3dcIiwgZXJyb3IsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBwcmV2aW91c1Byb21pc2U7XG5cbiAgICBmdW5jdGlvbiBlbnF1ZXVlKG1ldGhvZCwgYXJnKSB7XG4gICAgICBmdW5jdGlvbiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlSW1wbChmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJldmlvdXNQcm9taXNlID1cbiAgICAgICAgLy8gSWYgZW5xdWV1ZSBoYXMgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIHdlIHdhbnQgdG8gd2FpdCB1bnRpbFxuICAgICAgICAvLyBhbGwgcHJldmlvdXMgUHJvbWlzZXMgaGF2ZSBiZWVuIHJlc29sdmVkIGJlZm9yZSBjYWxsaW5nIGludm9rZSxcbiAgICAgICAgLy8gc28gdGhhdCByZXN1bHRzIGFyZSBhbHdheXMgZGVsaXZlcmVkIGluIHRoZSBjb3JyZWN0IG9yZGVyLiBJZlxuICAgICAgICAvLyBlbnF1ZXVlIGhhcyBub3QgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIGl0IGlzIGltcG9ydGFudCB0b1xuICAgICAgICAvLyBjYWxsIGludm9rZSBpbW1lZGlhdGVseSwgd2l0aG91dCB3YWl0aW5nIG9uIGEgY2FsbGJhY2sgdG8gZmlyZSxcbiAgICAgICAgLy8gc28gdGhhdCB0aGUgYXN5bmMgZ2VuZXJhdG9yIGZ1bmN0aW9uIGhhcyB0aGUgb3Bwb3J0dW5pdHkgdG8gZG9cbiAgICAgICAgLy8gYW55IG5lY2Vzc2FyeSBzZXR1cCBpbiBhIHByZWRpY3RhYmxlIHdheS4gVGhpcyBwcmVkaWN0YWJpbGl0eVxuICAgICAgICAvLyBpcyB3aHkgdGhlIFByb21pc2UgY29uc3RydWN0b3Igc3luY2hyb25vdXNseSBpbnZva2VzIGl0c1xuICAgICAgICAvLyBleGVjdXRvciBjYWxsYmFjaywgYW5kIHdoeSBhc3luYyBmdW5jdGlvbnMgc3luY2hyb25vdXNseVxuICAgICAgICAvLyBleGVjdXRlIGNvZGUgYmVmb3JlIHRoZSBmaXJzdCBhd2FpdC4gU2luY2Ugd2UgaW1wbGVtZW50IHNpbXBsZVxuICAgICAgICAvLyBhc3luYyBmdW5jdGlvbnMgaW4gdGVybXMgb2YgYXN5bmMgZ2VuZXJhdG9ycywgaXQgaXMgZXNwZWNpYWxseVxuICAgICAgICAvLyBpbXBvcnRhbnQgdG8gZ2V0IHRoaXMgcmlnaHQsIGV2ZW4gdGhvdWdoIGl0IHJlcXVpcmVzIGNhcmUuXG4gICAgICAgIHByZXZpb3VzUHJvbWlzZSA/IHByZXZpb3VzUHJvbWlzZS50aGVuKFxuICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnLFxuICAgICAgICAgIC8vIEF2b2lkIHByb3BhZ2F0aW5nIGZhaWx1cmVzIHRvIFByb21pc2VzIHJldHVybmVkIGJ5IGxhdGVyXG4gICAgICAgICAgLy8gaW52b2NhdGlvbnMgb2YgdGhlIGl0ZXJhdG9yLlxuICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnXG4gICAgICAgICkgOiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpO1xuICAgIH1cblxuICAgIC8vIERlZmluZSB0aGUgdW5pZmllZCBoZWxwZXIgbWV0aG9kIHRoYXQgaXMgdXNlZCB0byBpbXBsZW1lbnQgLm5leHQsXG4gICAgLy8gLnRocm93LCBhbmQgLnJldHVybiAoc2VlIGRlZmluZUl0ZXJhdG9yTWV0aG9kcykuXG4gICAgdGhpcy5faW52b2tlID0gZW5xdWV1ZTtcbiAgfVxuXG4gIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSk7XG4gIEFzeW5jSXRlcmF0b3IucHJvdG90eXBlW2FzeW5jSXRlcmF0b3JTeW1ib2xdID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICBleHBvcnRzLkFzeW5jSXRlcmF0b3IgPSBBc3luY0l0ZXJhdG9yO1xuXG4gIC8vIE5vdGUgdGhhdCBzaW1wbGUgYXN5bmMgZnVuY3Rpb25zIGFyZSBpbXBsZW1lbnRlZCBvbiB0b3Agb2ZcbiAgLy8gQXN5bmNJdGVyYXRvciBvYmplY3RzOyB0aGV5IGp1c3QgcmV0dXJuIGEgUHJvbWlzZSBmb3IgdGhlIHZhbHVlIG9mXG4gIC8vIHRoZSBmaW5hbCByZXN1bHQgcHJvZHVjZWQgYnkgdGhlIGl0ZXJhdG9yLlxuICBleHBvcnRzLmFzeW5jID0gZnVuY3Rpb24oaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QsIFByb21pc2VJbXBsKSB7XG4gICAgaWYgKFByb21pc2VJbXBsID09PSB2b2lkIDApIFByb21pc2VJbXBsID0gUHJvbWlzZTtcblxuICAgIHZhciBpdGVyID0gbmV3IEFzeW5jSXRlcmF0b3IoXG4gICAgICB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSxcbiAgICAgIFByb21pc2VJbXBsXG4gICAgKTtcblxuICAgIHJldHVybiBleHBvcnRzLmlzR2VuZXJhdG9yRnVuY3Rpb24ob3V0ZXJGbilcbiAgICAgID8gaXRlciAvLyBJZiBvdXRlckZuIGlzIGEgZ2VuZXJhdG9yLCByZXR1cm4gdGhlIGZ1bGwgaXRlcmF0b3IuXG4gICAgICA6IGl0ZXIubmV4dCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdC5kb25lID8gcmVzdWx0LnZhbHVlIDogaXRlci5uZXh0KCk7XG4gICAgICAgIH0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIG1ha2VJbnZva2VNZXRob2QoaW5uZXJGbiwgc2VsZiwgY29udGV4dCkge1xuICAgIHZhciBzdGF0ZSA9IEdlblN0YXRlU3VzcGVuZGVkU3RhcnQ7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnKSB7XG4gICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlRXhlY3V0aW5nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IHJ1bm5pbmdcIik7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVDb21wbGV0ZWQpIHtcbiAgICAgICAgaWYgKG1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgdGhyb3cgYXJnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQmUgZm9yZ2l2aW5nLCBwZXIgMjUuMy4zLjMuMyBvZiB0aGUgc3BlYzpcbiAgICAgICAgLy8gaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLWdlbmVyYXRvcnJlc3VtZVxuICAgICAgICByZXR1cm4gZG9uZVJlc3VsdCgpO1xuICAgICAgfVxuXG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IG1ldGhvZDtcbiAgICAgIGNvbnRleHQuYXJnID0gYXJnO1xuXG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICB2YXIgZGVsZWdhdGUgPSBjb250ZXh0LmRlbGVnYXRlO1xuICAgICAgICBpZiAoZGVsZWdhdGUpIHtcbiAgICAgICAgICB2YXIgZGVsZWdhdGVSZXN1bHQgPSBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KTtcbiAgICAgICAgICBpZiAoZGVsZWdhdGVSZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChkZWxlZ2F0ZVJlc3VsdCA9PT0gQ29udGludWVTZW50aW5lbCkgY29udGludWU7XG4gICAgICAgICAgICByZXR1cm4gZGVsZWdhdGVSZXN1bHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcIm5leHRcIikge1xuICAgICAgICAgIC8vIFNldHRpbmcgY29udGV4dC5fc2VudCBmb3IgbGVnYWN5IHN1cHBvcnQgb2YgQmFiZWwnc1xuICAgICAgICAgIC8vIGZ1bmN0aW9uLnNlbnQgaW1wbGVtZW50YXRpb24uXG4gICAgICAgICAgY29udGV4dC5zZW50ID0gY29udGV4dC5fc2VudCA9IGNvbnRleHQuYXJnO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoY29udGV4dC5tZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydCkge1xuICAgICAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUNvbXBsZXRlZDtcbiAgICAgICAgICAgIHRocm93IGNvbnRleHQuYXJnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnRleHQuZGlzcGF0Y2hFeGNlcHRpb24oY29udGV4dC5hcmcpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoY29udGV4dC5tZXRob2QgPT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgICBjb250ZXh0LmFicnVwdChcInJldHVyblwiLCBjb250ZXh0LmFyZyk7XG4gICAgICAgIH1cblxuICAgICAgICBzdGF0ZSA9IEdlblN0YXRlRXhlY3V0aW5nO1xuXG4gICAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChpbm5lckZuLCBzZWxmLCBjb250ZXh0KTtcbiAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcIm5vcm1hbFwiKSB7XG4gICAgICAgICAgLy8gSWYgYW4gZXhjZXB0aW9uIGlzIHRocm93biBmcm9tIGlubmVyRm4sIHdlIGxlYXZlIHN0YXRlID09PVxuICAgICAgICAgIC8vIEdlblN0YXRlRXhlY3V0aW5nIGFuZCBsb29wIGJhY2sgZm9yIGFub3RoZXIgaW52b2NhdGlvbi5cbiAgICAgICAgICBzdGF0ZSA9IGNvbnRleHQuZG9uZVxuICAgICAgICAgICAgPyBHZW5TdGF0ZUNvbXBsZXRlZFxuICAgICAgICAgICAgOiBHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkO1xuXG4gICAgICAgICAgaWYgKHJlY29yZC5hcmcgPT09IENvbnRpbnVlU2VudGluZWwpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWx1ZTogcmVjb3JkLmFyZyxcbiAgICAgICAgICAgIGRvbmU6IGNvbnRleHQuZG9uZVxuICAgICAgICAgIH07XG5cbiAgICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUNvbXBsZXRlZDtcbiAgICAgICAgICAvLyBEaXNwYXRjaCB0aGUgZXhjZXB0aW9uIGJ5IGxvb3BpbmcgYmFjayBhcm91bmQgdG8gdGhlXG4gICAgICAgICAgLy8gY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihjb250ZXh0LmFyZykgY2FsbCBhYm92ZS5cbiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLy8gQ2FsbCBkZWxlZ2F0ZS5pdGVyYXRvcltjb250ZXh0Lm1ldGhvZF0oY29udGV4dC5hcmcpIGFuZCBoYW5kbGUgdGhlXG4gIC8vIHJlc3VsdCwgZWl0aGVyIGJ5IHJldHVybmluZyBhIHsgdmFsdWUsIGRvbmUgfSByZXN1bHQgZnJvbSB0aGVcbiAgLy8gZGVsZWdhdGUgaXRlcmF0b3IsIG9yIGJ5IG1vZGlmeWluZyBjb250ZXh0Lm1ldGhvZCBhbmQgY29udGV4dC5hcmcsXG4gIC8vIHNldHRpbmcgY29udGV4dC5kZWxlZ2F0ZSB0byBudWxsLCBhbmQgcmV0dXJuaW5nIHRoZSBDb250aW51ZVNlbnRpbmVsLlxuICBmdW5jdGlvbiBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KSB7XG4gICAgdmFyIG1ldGhvZCA9IGRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXTtcbiAgICBpZiAobWV0aG9kID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIEEgLnRocm93IG9yIC5yZXR1cm4gd2hlbiB0aGUgZGVsZWdhdGUgaXRlcmF0b3IgaGFzIG5vIC50aHJvd1xuICAgICAgLy8gbWV0aG9kIGFsd2F5cyB0ZXJtaW5hdGVzIHRoZSB5aWVsZCogbG9vcC5cbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuXG4gICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAvLyBOb3RlOiBbXCJyZXR1cm5cIl0gbXVzdCBiZSB1c2VkIGZvciBFUzMgcGFyc2luZyBjb21wYXRpYmlsaXR5LlxuICAgICAgICBpZiAoZGVsZWdhdGUuaXRlcmF0b3JbXCJyZXR1cm5cIl0pIHtcbiAgICAgICAgICAvLyBJZiB0aGUgZGVsZWdhdGUgaXRlcmF0b3IgaGFzIGEgcmV0dXJuIG1ldGhvZCwgZ2l2ZSBpdCBhXG4gICAgICAgICAgLy8gY2hhbmNlIHRvIGNsZWFuIHVwLlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJyZXR1cm5cIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KTtcblxuICAgICAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAvLyBJZiBtYXliZUludm9rZURlbGVnYXRlKGNvbnRleHQpIGNoYW5nZWQgY29udGV4dC5tZXRob2QgZnJvbVxuICAgICAgICAgICAgLy8gXCJyZXR1cm5cIiB0byBcInRocm93XCIsIGxldCB0aGF0IG92ZXJyaWRlIHRoZSBUeXBlRXJyb3IgYmVsb3cuXG4gICAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgICAgY29udGV4dC5hcmcgPSBuZXcgVHlwZUVycm9yKFxuICAgICAgICAgIFwiVGhlIGl0ZXJhdG9yIGRvZXMgbm90IHByb3ZpZGUgYSAndGhyb3cnIG1ldGhvZFwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuXG4gICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKG1ldGhvZCwgZGVsZWdhdGUuaXRlcmF0b3IsIGNvbnRleHQuYXJnKTtcblxuICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgIGNvbnRleHQuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuXG4gICAgdmFyIGluZm8gPSByZWNvcmQuYXJnO1xuXG4gICAgaWYgKCEgaW5mbykge1xuICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoXCJpdGVyYXRvciByZXN1bHQgaXMgbm90IGFuIG9iamVjdFwiKTtcbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuXG4gICAgaWYgKGluZm8uZG9uZSkge1xuICAgICAgLy8gQXNzaWduIHRoZSByZXN1bHQgb2YgdGhlIGZpbmlzaGVkIGRlbGVnYXRlIHRvIHRoZSB0ZW1wb3JhcnlcbiAgICAgIC8vIHZhcmlhYmxlIHNwZWNpZmllZCBieSBkZWxlZ2F0ZS5yZXN1bHROYW1lIChzZWUgZGVsZWdhdGVZaWVsZCkuXG4gICAgICBjb250ZXh0W2RlbGVnYXRlLnJlc3VsdE5hbWVdID0gaW5mby52YWx1ZTtcblxuICAgICAgLy8gUmVzdW1lIGV4ZWN1dGlvbiBhdCB0aGUgZGVzaXJlZCBsb2NhdGlvbiAoc2VlIGRlbGVnYXRlWWllbGQpLlxuICAgICAgY29udGV4dC5uZXh0ID0gZGVsZWdhdGUubmV4dExvYztcblxuICAgICAgLy8gSWYgY29udGV4dC5tZXRob2Qgd2FzIFwidGhyb3dcIiBidXQgdGhlIGRlbGVnYXRlIGhhbmRsZWQgdGhlXG4gICAgICAvLyBleGNlcHRpb24sIGxldCB0aGUgb3V0ZXIgZ2VuZXJhdG9yIHByb2NlZWQgbm9ybWFsbHkuIElmXG4gICAgICAvLyBjb250ZXh0Lm1ldGhvZCB3YXMgXCJuZXh0XCIsIGZvcmdldCBjb250ZXh0LmFyZyBzaW5jZSBpdCBoYXMgYmVlblxuICAgICAgLy8gXCJjb25zdW1lZFwiIGJ5IHRoZSBkZWxlZ2F0ZSBpdGVyYXRvci4gSWYgY29udGV4dC5tZXRob2Qgd2FzXG4gICAgICAvLyBcInJldHVyblwiLCBhbGxvdyB0aGUgb3JpZ2luYWwgLnJldHVybiBjYWxsIHRvIGNvbnRpbnVlIGluIHRoZVxuICAgICAgLy8gb3V0ZXIgZ2VuZXJhdG9yLlxuICAgICAgaWYgKGNvbnRleHQubWV0aG9kICE9PSBcInJldHVyblwiKSB7XG4gICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFJlLXlpZWxkIHRoZSByZXN1bHQgcmV0dXJuZWQgYnkgdGhlIGRlbGVnYXRlIG1ldGhvZC5cbiAgICAgIHJldHVybiBpbmZvO1xuICAgIH1cblxuICAgIC8vIFRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBpcyBmaW5pc2hlZCwgc28gZm9yZ2V0IGl0IGFuZCBjb250aW51ZSB3aXRoXG4gICAgLy8gdGhlIG91dGVyIGdlbmVyYXRvci5cbiAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcbiAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgfVxuXG4gIC8vIERlZmluZSBHZW5lcmF0b3IucHJvdG90eXBlLntuZXh0LHRocm93LHJldHVybn0gaW4gdGVybXMgb2YgdGhlXG4gIC8vIHVuaWZpZWQgLl9pbnZva2UgaGVscGVyIG1ldGhvZC5cbiAgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEdwKTtcblxuICBkZWZpbmUoR3AsIHRvU3RyaW5nVGFnU3ltYm9sLCBcIkdlbmVyYXRvclwiKTtcblxuICAvLyBBIEdlbmVyYXRvciBzaG91bGQgYWx3YXlzIHJldHVybiBpdHNlbGYgYXMgdGhlIGl0ZXJhdG9yIG9iamVjdCB3aGVuIHRoZVxuICAvLyBAQGl0ZXJhdG9yIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbiBpdC4gU29tZSBicm93c2VycycgaW1wbGVtZW50YXRpb25zIG9mIHRoZVxuICAvLyBpdGVyYXRvciBwcm90b3R5cGUgY2hhaW4gaW5jb3JyZWN0bHkgaW1wbGVtZW50IHRoaXMsIGNhdXNpbmcgdGhlIEdlbmVyYXRvclxuICAvLyBvYmplY3QgdG8gbm90IGJlIHJldHVybmVkIGZyb20gdGhpcyBjYWxsLiBUaGlzIGVuc3VyZXMgdGhhdCBkb2Vzbid0IGhhcHBlbi5cbiAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWdlbmVyYXRvci9pc3N1ZXMvMjc0IGZvciBtb3JlIGRldGFpbHMuXG4gIEdwW2l0ZXJhdG9yU3ltYm9sXSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIEdwLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwiW29iamVjdCBHZW5lcmF0b3JdXCI7XG4gIH07XG5cbiAgZnVuY3Rpb24gcHVzaFRyeUVudHJ5KGxvY3MpIHtcbiAgICB2YXIgZW50cnkgPSB7IHRyeUxvYzogbG9jc1swXSB9O1xuXG4gICAgaWYgKDEgaW4gbG9jcykge1xuICAgICAgZW50cnkuY2F0Y2hMb2MgPSBsb2NzWzFdO1xuICAgIH1cblxuICAgIGlmICgyIGluIGxvY3MpIHtcbiAgICAgIGVudHJ5LmZpbmFsbHlMb2MgPSBsb2NzWzJdO1xuICAgICAgZW50cnkuYWZ0ZXJMb2MgPSBsb2NzWzNdO1xuICAgIH1cblxuICAgIHRoaXMudHJ5RW50cmllcy5wdXNoKGVudHJ5KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc2V0VHJ5RW50cnkoZW50cnkpIHtcbiAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbiB8fCB7fTtcbiAgICByZWNvcmQudHlwZSA9IFwibm9ybWFsXCI7XG4gICAgZGVsZXRlIHJlY29yZC5hcmc7XG4gICAgZW50cnkuY29tcGxldGlvbiA9IHJlY29yZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIENvbnRleHQodHJ5TG9jc0xpc3QpIHtcbiAgICAvLyBUaGUgcm9vdCBlbnRyeSBvYmplY3QgKGVmZmVjdGl2ZWx5IGEgdHJ5IHN0YXRlbWVudCB3aXRob3V0IGEgY2F0Y2hcbiAgICAvLyBvciBhIGZpbmFsbHkgYmxvY2spIGdpdmVzIHVzIGEgcGxhY2UgdG8gc3RvcmUgdmFsdWVzIHRocm93biBmcm9tXG4gICAgLy8gbG9jYXRpb25zIHdoZXJlIHRoZXJlIGlzIG5vIGVuY2xvc2luZyB0cnkgc3RhdGVtZW50LlxuICAgIHRoaXMudHJ5RW50cmllcyA9IFt7IHRyeUxvYzogXCJyb290XCIgfV07XG4gICAgdHJ5TG9jc0xpc3QuZm9yRWFjaChwdXNoVHJ5RW50cnksIHRoaXMpO1xuICAgIHRoaXMucmVzZXQodHJ1ZSk7XG4gIH1cblxuICBleHBvcnRzLmtleXMgPSBmdW5jdGlvbihvYmplY3QpIHtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICAgIGtleXMucHVzaChrZXkpO1xuICAgIH1cbiAgICBrZXlzLnJldmVyc2UoKTtcblxuICAgIC8vIFJhdGhlciB0aGFuIHJldHVybmluZyBhbiBvYmplY3Qgd2l0aCBhIG5leHQgbWV0aG9kLCB3ZSBrZWVwXG4gICAgLy8gdGhpbmdzIHNpbXBsZSBhbmQgcmV0dXJuIHRoZSBuZXh0IGZ1bmN0aW9uIGl0c2VsZi5cbiAgICByZXR1cm4gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgIHdoaWxlIChrZXlzLmxlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0ga2V5cy5wb3AoKTtcbiAgICAgICAgaWYgKGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgICBuZXh0LnZhbHVlID0ga2V5O1xuICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRvIGF2b2lkIGNyZWF0aW5nIGFuIGFkZGl0aW9uYWwgb2JqZWN0LCB3ZSBqdXN0IGhhbmcgdGhlIC52YWx1ZVxuICAgICAgLy8gYW5kIC5kb25lIHByb3BlcnRpZXMgb2ZmIHRoZSBuZXh0IGZ1bmN0aW9uIG9iamVjdCBpdHNlbGYuIFRoaXNcbiAgICAgIC8vIGFsc28gZW5zdXJlcyB0aGF0IHRoZSBtaW5pZmllciB3aWxsIG5vdCBhbm9ueW1pemUgdGhlIGZ1bmN0aW9uLlxuICAgICAgbmV4dC5kb25lID0gdHJ1ZTtcbiAgICAgIHJldHVybiBuZXh0O1xuICAgIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gdmFsdWVzKGl0ZXJhYmxlKSB7XG4gICAgaWYgKGl0ZXJhYmxlKSB7XG4gICAgICB2YXIgaXRlcmF0b3JNZXRob2QgPSBpdGVyYWJsZVtpdGVyYXRvclN5bWJvbF07XG4gICAgICBpZiAoaXRlcmF0b3JNZXRob2QpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhdG9yTWV0aG9kLmNhbGwoaXRlcmFibGUpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGl0ZXJhYmxlLm5leHQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gaXRlcmFibGU7XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNOYU4oaXRlcmFibGUubGVuZ3RoKSkge1xuICAgICAgICB2YXIgaSA9IC0xLCBuZXh0ID0gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgICAgICB3aGlsZSAoKytpIDwgaXRlcmFibGUubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoaGFzT3duLmNhbGwoaXRlcmFibGUsIGkpKSB7XG4gICAgICAgICAgICAgIG5leHQudmFsdWUgPSBpdGVyYWJsZVtpXTtcbiAgICAgICAgICAgICAgbmV4dC5kb25lID0gZmFsc2U7XG4gICAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIG5leHQudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgbmV4dC5kb25lID0gdHJ1ZTtcblxuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBuZXh0Lm5leHQgPSBuZXh0O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJldHVybiBhbiBpdGVyYXRvciB3aXRoIG5vIHZhbHVlcy5cbiAgICByZXR1cm4geyBuZXh0OiBkb25lUmVzdWx0IH07XG4gIH1cbiAgZXhwb3J0cy52YWx1ZXMgPSB2YWx1ZXM7XG5cbiAgZnVuY3Rpb24gZG9uZVJlc3VsdCgpIHtcbiAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gIH1cblxuICBDb250ZXh0LnByb3RvdHlwZSA9IHtcbiAgICBjb25zdHJ1Y3RvcjogQ29udGV4dCxcblxuICAgIHJlc2V0OiBmdW5jdGlvbihza2lwVGVtcFJlc2V0KSB7XG4gICAgICB0aGlzLnByZXYgPSAwO1xuICAgICAgdGhpcy5uZXh0ID0gMDtcbiAgICAgIC8vIFJlc2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzXG4gICAgICAvLyBmdW5jdGlvbi5zZW50IGltcGxlbWVudGF0aW9uLlxuICAgICAgdGhpcy5zZW50ID0gdGhpcy5fc2VudCA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgdGhpcy5kZWxlZ2F0ZSA9IG51bGw7XG5cbiAgICAgIHRoaXMubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICB0aGlzLmFyZyA9IHVuZGVmaW5lZDtcblxuICAgICAgdGhpcy50cnlFbnRyaWVzLmZvckVhY2gocmVzZXRUcnlFbnRyeSk7XG5cbiAgICAgIGlmICghc2tpcFRlbXBSZXNldCkge1xuICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMpIHtcbiAgICAgICAgICAvLyBOb3Qgc3VyZSBhYm91dCB0aGUgb3B0aW1hbCBvcmRlciBvZiB0aGVzZSBjb25kaXRpb25zOlxuICAgICAgICAgIGlmIChuYW1lLmNoYXJBdCgwKSA9PT0gXCJ0XCIgJiZcbiAgICAgICAgICAgICAgaGFzT3duLmNhbGwodGhpcywgbmFtZSkgJiZcbiAgICAgICAgICAgICAgIWlzTmFOKCtuYW1lLnNsaWNlKDEpKSkge1xuICAgICAgICAgICAgdGhpc1tuYW1lXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgc3RvcDogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuXG4gICAgICB2YXIgcm9vdEVudHJ5ID0gdGhpcy50cnlFbnRyaWVzWzBdO1xuICAgICAgdmFyIHJvb3RSZWNvcmQgPSByb290RW50cnkuY29tcGxldGlvbjtcbiAgICAgIGlmIChyb290UmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICB0aHJvdyByb290UmVjb3JkLmFyZztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMucnZhbDtcbiAgICB9LFxuXG4gICAgZGlzcGF0Y2hFeGNlcHRpb246IGZ1bmN0aW9uKGV4Y2VwdGlvbikge1xuICAgICAgaWYgKHRoaXMuZG9uZSkge1xuICAgICAgICB0aHJvdyBleGNlcHRpb247XG4gICAgICB9XG5cbiAgICAgIHZhciBjb250ZXh0ID0gdGhpcztcbiAgICAgIGZ1bmN0aW9uIGhhbmRsZShsb2MsIGNhdWdodCkge1xuICAgICAgICByZWNvcmQudHlwZSA9IFwidGhyb3dcIjtcbiAgICAgICAgcmVjb3JkLmFyZyA9IGV4Y2VwdGlvbjtcbiAgICAgICAgY29udGV4dC5uZXh0ID0gbG9jO1xuXG4gICAgICAgIGlmIChjYXVnaHQpIHtcbiAgICAgICAgICAvLyBJZiB0aGUgZGlzcGF0Y2hlZCBleGNlcHRpb24gd2FzIGNhdWdodCBieSBhIGNhdGNoIGJsb2NrLFxuICAgICAgICAgIC8vIHRoZW4gbGV0IHRoYXQgY2F0Y2ggYmxvY2sgaGFuZGxlIHRoZSBleGNlcHRpb24gbm9ybWFsbHkuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAhISBjYXVnaHQ7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbjtcblxuICAgICAgICBpZiAoZW50cnkudHJ5TG9jID09PSBcInJvb3RcIikge1xuICAgICAgICAgIC8vIEV4Y2VwdGlvbiB0aHJvd24gb3V0c2lkZSBvZiBhbnkgdHJ5IGJsb2NrIHRoYXQgY291bGQgaGFuZGxlXG4gICAgICAgICAgLy8gaXQsIHNvIHNldCB0aGUgY29tcGxldGlvbiB2YWx1ZSBvZiB0aGUgZW50aXJlIGZ1bmN0aW9uIHRvXG4gICAgICAgICAgLy8gdGhyb3cgdGhlIGV4Y2VwdGlvbi5cbiAgICAgICAgICByZXR1cm4gaGFuZGxlKFwiZW5kXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA8PSB0aGlzLnByZXYpIHtcbiAgICAgICAgICB2YXIgaGFzQ2F0Y2ggPSBoYXNPd24uY2FsbChlbnRyeSwgXCJjYXRjaExvY1wiKTtcbiAgICAgICAgICB2YXIgaGFzRmluYWxseSA9IGhhc093bi5jYWxsKGVudHJ5LCBcImZpbmFsbHlMb2NcIik7XG5cbiAgICAgICAgICBpZiAoaGFzQ2F0Y2ggJiYgaGFzRmluYWxseSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsIHRydWUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKGhhc0NhdGNoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuY2F0Y2hMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKGhhc0ZpbmFsbHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHlcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIGFicnVwdDogZnVuY3Rpb24odHlwZSwgYXJnKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA8PSB0aGlzLnByZXYgJiZcbiAgICAgICAgICAgIGhhc093bi5jYWxsKGVudHJ5LCBcImZpbmFsbHlMb2NcIikgJiZcbiAgICAgICAgICAgIHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICB2YXIgZmluYWxseUVudHJ5ID0gZW50cnk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGZpbmFsbHlFbnRyeSAmJlxuICAgICAgICAgICh0eXBlID09PSBcImJyZWFrXCIgfHxcbiAgICAgICAgICAgdHlwZSA9PT0gXCJjb250aW51ZVwiKSAmJlxuICAgICAgICAgIGZpbmFsbHlFbnRyeS50cnlMb2MgPD0gYXJnICYmXG4gICAgICAgICAgYXJnIDw9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgIC8vIElnbm9yZSB0aGUgZmluYWxseSBlbnRyeSBpZiBjb250cm9sIGlzIG5vdCBqdW1waW5nIHRvIGFcbiAgICAgICAgLy8gbG9jYXRpb24gb3V0c2lkZSB0aGUgdHJ5L2NhdGNoIGJsb2NrLlxuICAgICAgICBmaW5hbGx5RW50cnkgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICB2YXIgcmVjb3JkID0gZmluYWxseUVudHJ5ID8gZmluYWxseUVudHJ5LmNvbXBsZXRpb24gOiB7fTtcbiAgICAgIHJlY29yZC50eXBlID0gdHlwZTtcbiAgICAgIHJlY29yZC5hcmcgPSBhcmc7XG5cbiAgICAgIGlmIChmaW5hbGx5RW50cnkpIHtcbiAgICAgICAgdGhpcy5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgdGhpcy5uZXh0ID0gZmluYWxseUVudHJ5LmZpbmFsbHlMb2M7XG4gICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5jb21wbGV0ZShyZWNvcmQpO1xuICAgIH0sXG5cbiAgICBjb21wbGV0ZTogZnVuY3Rpb24ocmVjb3JkLCBhZnRlckxvYykge1xuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgcmVjb3JkLmFyZztcbiAgICAgIH1cblxuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcImJyZWFrXCIgfHxcbiAgICAgICAgICByZWNvcmQudHlwZSA9PT0gXCJjb250aW51ZVwiKSB7XG4gICAgICAgIHRoaXMubmV4dCA9IHJlY29yZC5hcmc7XG4gICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcInJldHVyblwiKSB7XG4gICAgICAgIHRoaXMucnZhbCA9IHRoaXMuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgICAgdGhpcy5tZXRob2QgPSBcInJldHVyblwiO1xuICAgICAgICB0aGlzLm5leHQgPSBcImVuZFwiO1xuICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJub3JtYWxcIiAmJiBhZnRlckxvYykge1xuICAgICAgICB0aGlzLm5leHQgPSBhZnRlckxvYztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfSxcblxuICAgIGZpbmlzaDogZnVuY3Rpb24oZmluYWxseUxvYykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS5maW5hbGx5TG9jID09PSBmaW5hbGx5TG9jKSB7XG4gICAgICAgICAgdGhpcy5jb21wbGV0ZShlbnRyeS5jb21wbGV0aW9uLCBlbnRyeS5hZnRlckxvYyk7XG4gICAgICAgICAgcmVzZXRUcnlFbnRyeShlbnRyeSk7XG4gICAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgXCJjYXRjaFwiOiBmdW5jdGlvbih0cnlMb2MpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkudHJ5TG9jID09PSB0cnlMb2MpIHtcbiAgICAgICAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbjtcbiAgICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgdmFyIHRocm93biA9IHJlY29yZC5hcmc7XG4gICAgICAgICAgICByZXNldFRyeUVudHJ5KGVudHJ5KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRocm93bjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUaGUgY29udGV4dC5jYXRjaCBtZXRob2QgbXVzdCBvbmx5IGJlIGNhbGxlZCB3aXRoIGEgbG9jYXRpb25cbiAgICAgIC8vIGFyZ3VtZW50IHRoYXQgY29ycmVzcG9uZHMgdG8gYSBrbm93biBjYXRjaCBibG9jay5cbiAgICAgIHRocm93IG5ldyBFcnJvcihcImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdFwiKTtcbiAgICB9LFxuXG4gICAgZGVsZWdhdGVZaWVsZDogZnVuY3Rpb24oaXRlcmFibGUsIHJlc3VsdE5hbWUsIG5leHRMb2MpIHtcbiAgICAgIHRoaXMuZGVsZWdhdGUgPSB7XG4gICAgICAgIGl0ZXJhdG9yOiB2YWx1ZXMoaXRlcmFibGUpLFxuICAgICAgICByZXN1bHROYW1lOiByZXN1bHROYW1lLFxuICAgICAgICBuZXh0TG9jOiBuZXh0TG9jXG4gICAgICB9O1xuXG4gICAgICBpZiAodGhpcy5tZXRob2QgPT09IFwibmV4dFwiKSB7XG4gICAgICAgIC8vIERlbGliZXJhdGVseSBmb3JnZXQgdGhlIGxhc3Qgc2VudCB2YWx1ZSBzbyB0aGF0IHdlIGRvbid0XG4gICAgICAgIC8vIGFjY2lkZW50YWxseSBwYXNzIGl0IG9uIHRvIHRoZSBkZWxlZ2F0ZS5cbiAgICAgICAgdGhpcy5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cbiAgfTtcblxuICAvLyBSZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhpcyBzY3JpcHQgaXMgZXhlY3V0aW5nIGFzIGEgQ29tbW9uSlMgbW9kdWxlXG4gIC8vIG9yIG5vdCwgcmV0dXJuIHRoZSBydW50aW1lIG9iamVjdCBzbyB0aGF0IHdlIGNhbiBkZWNsYXJlIHRoZSB2YXJpYWJsZVxuICAvLyByZWdlbmVyYXRvclJ1bnRpbWUgaW4gdGhlIG91dGVyIHNjb3BlLCB3aGljaCBhbGxvd3MgdGhpcyBtb2R1bGUgdG8gYmVcbiAgLy8gaW5qZWN0ZWQgZWFzaWx5IGJ5IGBiaW4vcmVnZW5lcmF0b3IgLS1pbmNsdWRlLXJ1bnRpbWUgc2NyaXB0LmpzYC5cbiAgcmV0dXJuIGV4cG9ydHM7XG5cbn0oXG4gIC8vIElmIHRoaXMgc2NyaXB0IGlzIGV4ZWN1dGluZyBhcyBhIENvbW1vbkpTIG1vZHVsZSwgdXNlIG1vZHVsZS5leHBvcnRzXG4gIC8vIGFzIHRoZSByZWdlbmVyYXRvclJ1bnRpbWUgbmFtZXNwYWNlLiBPdGhlcndpc2UgY3JlYXRlIGEgbmV3IGVtcHR5XG4gIC8vIG9iamVjdC4gRWl0aGVyIHdheSwgdGhlIHJlc3VsdGluZyBvYmplY3Qgd2lsbCBiZSB1c2VkIHRvIGluaXRpYWxpemVcbiAgLy8gdGhlIHJlZ2VuZXJhdG9yUnVudGltZSB2YXJpYWJsZSBhdCB0aGUgdG9wIG9mIHRoaXMgZmlsZS5cbiAgdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiA/IG1vZHVsZS5leHBvcnRzIDoge31cbikpO1xuXG50cnkge1xuICByZWdlbmVyYXRvclJ1bnRpbWUgPSBydW50aW1lO1xufSBjYXRjaCAoYWNjaWRlbnRhbFN0cmljdE1vZGUpIHtcbiAgLy8gVGhpcyBtb2R1bGUgc2hvdWxkIG5vdCBiZSBydW5uaW5nIGluIHN0cmljdCBtb2RlLCBzbyB0aGUgYWJvdmVcbiAgLy8gYXNzaWdubWVudCBzaG91bGQgYWx3YXlzIHdvcmsgdW5sZXNzIHNvbWV0aGluZyBpcyBtaXNjb25maWd1cmVkLiBKdXN0XG4gIC8vIGluIGNhc2UgcnVudGltZS5qcyBhY2NpZGVudGFsbHkgcnVucyBpbiBzdHJpY3QgbW9kZSwgd2UgY2FuIGVzY2FwZVxuICAvLyBzdHJpY3QgbW9kZSB1c2luZyBhIGdsb2JhbCBGdW5jdGlvbiBjYWxsLiBUaGlzIGNvdWxkIGNvbmNlaXZhYmx5IGZhaWxcbiAgLy8gaWYgYSBDb250ZW50IFNlY3VyaXR5IFBvbGljeSBmb3JiaWRzIHVzaW5nIEZ1bmN0aW9uLCBidXQgaW4gdGhhdCBjYXNlXG4gIC8vIHRoZSBwcm9wZXIgc29sdXRpb24gaXMgdG8gZml4IHRoZSBhY2NpZGVudGFsIHN0cmljdCBtb2RlIHByb2JsZW0uIElmXG4gIC8vIHlvdSd2ZSBtaXNjb25maWd1cmVkIHlvdXIgYnVuZGxlciB0byBmb3JjZSBzdHJpY3QgbW9kZSBhbmQgYXBwbGllZCBhXG4gIC8vIENTUCB0byBmb3JiaWQgRnVuY3Rpb24sIGFuZCB5b3UncmUgbm90IHdpbGxpbmcgdG8gZml4IGVpdGhlciBvZiB0aG9zZVxuICAvLyBwcm9ibGVtcywgcGxlYXNlIGRldGFpbCB5b3VyIHVuaXF1ZSBwcmVkaWNhbWVudCBpbiBhIEdpdEh1YiBpc3N1ZS5cbiAgRnVuY3Rpb24oXCJyXCIsIFwicmVnZW5lcmF0b3JSdW50aW1lID0gclwiKShydW50aW1lKTtcbn1cbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gbW9kdWxlWydkZWZhdWx0J10gOlxuXHRcdCgpID0+IG1vZHVsZTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3Mge1xuXG4gIGNvbnN0cnVjdG9yKGFwaSkge1xuICAgIHRoaXMuYXBpID0gYXBpO1xuICB9XG5cbiAgYXN5bmMgZmV0Y2hEYXRhKGlkID0gbnVsbCkge1xuICAgIHRyeSB7XG4gICAgICBsZXQgcmVzcG9uc2U7XG5cbiAgICAgIC8vIFNlbmQgcmVxdWVzdCB0byBBUEkgdGhlbiB3YWl0IGZvciB0aGUgcmVzcG9uc2VcbiAgICAgIGlmIChpZCkge1xuICAgICAgICByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMuYXBpICsgaWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLmFwaSk7XG4gICAgICB9XG5cbiAgICAgIC8vIENvbnZlcnQgcmVzcG9uc2UgdG8ganNvblxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgcmV0dXJuIGRhdGE7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignTGEgY29ubmVjdGlvbiBhdmVjIGxlIHNlcnZldXIgblxcJ2EgcHUgw6p0cmUgw6l0YWJsaWUuXFxuJyArIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBmZXRjaChpZCkge1xuICAgIC8vIENhbGwgZmV0Y2hEYXRhIHdpdGggcGFyYW1ldGVyID0+IHJldHVybiAxIGl0ZW1cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5mZXRjaERhdGEoaWQpO1xuICB9XG5cbiAgYXN5bmMgZmV0Y2hBbGwoKSB7XG4gICAgLy8gQ2FsbCBmZXRjaERhdGEgd2l0aG91dCBwYXJhbWV0ZXIgPT4gcmV0dXJuIGFsbCBpdGVtc1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmZldGNoRGF0YSgpO1xuICB9XG5cbiAgYXN5bmMgc2VuZChvcmRlcikge1xuICAgIC8vIFNlbmQgZGF0YSB0byB0aGUgYXBpIHZpYSBQT1NUIHJlcXVlc3RcbiAgICBjb25zdCByZXF1ZXN0ID0gYXdhaXQgZmV0Y2godGhpcy5hcGksIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShvcmRlciksXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIFwiQ29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEYtOFwiXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCByZXNwb25zZSA9IHJlcXVlc3QuanNvbigpO1xuXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9XG5cblxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIHtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLml0ZW1zID0gW107XG4gICAgdGhpcy50b3RhbCA9IDA7XG4gICAgdGhpcy5pbml0KCk7XG4gIH1cblxuICBpbml0KCkge1xuICAgIC8vIENoZWNrIGlmIGEgY2FydCBoYXMgYmVlbiBzYXZlZCB0aGVuIGxvYWQgaXRcbiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSkge1xuICAgICAgY29uc3QgY2FydCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSk7XG4gICAgICB0aGlzLml0ZW1zID0gY2FydC5pdGVtcztcbiAgICAgIHRoaXMudG90YWwgPSBjYXJ0LnRvdGFsO1xuICAgIH1cbiAgfVxuXG4gIGFkZEl0ZW0obmV3SXRlbSkge1xuICAgIGxldCBkdXBsaWNhdGUgPSBmYWxzZTtcblxuICAgIC8vIENoZWNrIGlmIGl0ZW0gcmVmZXJlbmNlIGlzIGluIGNhcnQgdG8gdXBkYXRlIHF1YW50aXR5XG4gICAgdGhpcy5pdGVtcy5tYXAoaXRlbSA9PiB7XG4gICAgICBpZiAoaXRlbS5pZCA9PT0gbmV3SXRlbS5pZCkge1xuICAgICAgICBpdGVtLnF1YW50aXR5ICs9IG5ld0l0ZW0ucXVhbnRpdHk7XG4gICAgICAgIGR1cGxpY2F0ZSA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoIWR1cGxpY2F0ZSkge1xuICAgICAgdGhpcy5pdGVtcy5wdXNoKG5ld0l0ZW0pO1xuICAgIH1cblxuICAgIC8vIFNhdmUgdGhlIGNhcnQgaW4gbG9jYWxTdG9yYWdlXG4gICAgdGhpcy5zYXZlKCk7XG4gIH1cblxuICByZW1vdmVJdGVtKGlkKSB7XG4gICAgdGhpcy5pdGVtcyA9IHRoaXMuaXRlbXMuZmlsdGVyKGl0ZW0gPT4ge1xuICAgICAgcmV0dXJuIGl0ZW0uaWQgIT09IGlkO1xuICAgIH0pO1xuXG4gICAgdGhpcy5zYXZlKCk7XG4gIH1cblxuICB1cGRhdGVJdGVtKGlkLCBxdWFudGl0eSkge1xuICAgIHRoaXMuaXRlbXMubWFwKGl0ZW0gPT4ge1xuICAgICAgaWYgKGl0ZW0uaWQgPT09IGlkKSB7XG4gICAgICAgIGl0ZW0ucXVhbnRpdHkgPSBxdWFudGl0eTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuc2F2ZSgpO1xuICB9XG5cbiAgc2V0VG90YWwoKSB7XG4gICAgdGhpcy50b3RhbCA9IHRoaXMuaXRlbXMucmVkdWNlKCh0b3RhbCwgY3VycmVudCkgPT4ge1xuICAgICAgcmV0dXJuIHRvdGFsICsgKGN1cnJlbnQucXVhbnRpdHkgKiBjdXJyZW50LnByaWNlKTtcbiAgICB9LCAwKVxuICB9XG5cbiAgc2F2ZSgpIHtcbiAgICB0aGlzLnNldFRvdGFsKCk7XG5cbiAgICBjb25zdCBjYXJ0SW5mb3JtYXRpb25zID0ge1xuICAgICAgaXRlbXM6IHRoaXMuaXRlbXMsXG4gICAgICB0b3RhbDogdGhpcy50b3RhbFxuICAgIH1cblxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjYXJ0JywgSlNPTi5zdHJpbmdpZnkoY2FydEluZm9ybWF0aW9ucykpO1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgLy8gRW1wdHkgdGhlIGNhcnRcbiAgICB0aGlzLml0ZW1zID0gW107XG4gICAgLy8gUmVzZXQgdG90YWxcbiAgICB0aGlzLnRvdGFsID0gMDtcblxuICAgIC8vIFJlbW92ZSBzYXZlZFxuICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpXG4gIH1cblxuICBnZXRDb3VudCgpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtcy5sZW5ndGg7XG4gIH1cblxuICBnZXREYXRhKCkge1xuICAgIGNvbnN0IGNhcnREYXRhID0ge1xuICAgICAgaXRlbXM6IHRoaXMuaXRlbXMsXG4gICAgICB0b3RhbDogdGhpcy50b3RhbFxuICAgIH07XG5cbiAgICByZXR1cm4gY2FydERhdGE7XG4gIH1cblxuICBnZXRJdGVtcygpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtcy5tYXAoaXRlbSA9PiBpdGVtLmlkKVxuICB9XG5cbn0iLCIvLyBNYWtlIHByaWNlIHJlYWRhYmxlIGZvciB1c2Vyc1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFByaWNlKHByaWNlKSB7XG4gIHByaWNlID0gcHJpY2UgLyAxMDA7XG5cbiAgcmV0dXJuIHByaWNlLnRvRml4ZWQoMikgKyAnIOKCrCc7XG59XG5cblxuLy8gR2V0IGlkIGZyb20gdXJsIHBhcmFtZXRlcnNcbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0SWRGcm9tVXJsKCkge1xuICBjb25zdCBpZCA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3BsaXQoXCI9XCIpWzFdO1xuXG4gIGlmICghaWQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiBpZDtcbn1cblxuLy8gQW5pbWF0ZSBjYXJ0IGJ1dHRvbiB3aGVuIGFuIGl0ZW0gaGFzIGJlZW4gYWRkZWRcbmV4cG9ydCBmdW5jdGlvbiBhbmltYXRlQ2FydEJ0bigpIHtcbiAgY29uc3QgY2FydEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjYXJ0LWJ0bicpO1xuXG4gIC8vIEFkZCB0aGUgYW5pbWF0aW9uXG4gIGNhcnRCdG4uY2xhc3NMaXN0LmFkZCgnYW5pbWF0ZScpO1xuXG4gIC8vIFJlbW92ZSB0aGUgYW5pbWF0aW9uIHdoZW4gY29tcGxldGVkXG4gIGNhcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgKGV2ZW50KSA9PiB7XG4gICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW1hdGUnKVxuICB9KVxufSIsImltcG9ydCB7IGZvcm1hdFByaWNlIH0gZnJvbSAnLi4vdXRpbHMuanMnO1xuXG4vLyBCYXNlIGNsYXNzIGZvciBDYXJkUHJldmlld1xuY2xhc3MgQ2FyZCB7XG5cbiAgY29uc3RydWN0b3Iob2JqKSB7XG4gICAgdGhpcy50ZW1wbGF0ZSA9IG51bGw7XG4gICAgdGhpcy5jb250ZW50ID0gb2JqXG4gIH1cblxuICBpbmplY3RUbyhtb3VudFBvaW50KSB7XG4gICAgLy8gQ3JlYXRlIG1hcmt1cCB0aGVuIGluamVjdCBpdCBpbnRvIHNlbGVjdGVkIGVsZW1lbnQgKG1vdW50UG9pbnQpIGluIHRoZSBET01cbiAgICB0aGlzLnRvSFRNTCgpO1xuICAgIG1vdW50UG9pbnQuYXBwZW5kQ2hpbGQodGhpcy50ZW1wbGF0ZSlcbiAgfVxuXG4gIG9uQWRkKGNiKSB7XG4gICAgY29uc3QgYnV5QnRuID0gdGhpcy50ZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKCcuanMtYnV5Jyk7XG4gICAgY29uc3QgcXR5QnRuID0gdGhpcy50ZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKCcuanMtcXVhbnRpdHknKTtcblxuICAgIGJ1eUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNiKTtcblxuICAgIGlmICh0aGlzIGluc3RhbmNlb2YgQ2FyZERldGFpbHMpIHtcbiAgICAgIHF0eUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xuICAgICAgICAvLyBSZXNldCBxdWFudGl0eSB0byAxIGlmIG51bGwgb3IgbmVnYXRpdmVcbiAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlIDwgMSkge1xuICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID0gMTtcbiAgICAgICAgfTtcbiAgICAgICAgYnV5QnRuLmRhdGFzZXQucXVhbnRpdHkgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbn1cblxuXG5leHBvcnQgY2xhc3MgQ2FyZFByZXZpZXcgZXh0ZW5kcyBDYXJkIHtcblxuICBjb25zdHJ1Y3RvcihvYmopIHtcbiAgICAvLyBDYWxsIHBhcmVudCBjbGFzcyBjb25zdHJ1Y3RvclxuICAgIHN1cGVyKG9iaik7XG4gIH1cblxuICB0b0hUTUwoKSB7XG4gICAgLy8gQ3JlYXRlIEhUTUwgZWxlbWVudCB0byBjb250YWluIG1hcmt1cFxuICAgIHRoaXMudGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgIHRoaXMudGVtcGxhdGUuaW5uZXJIVE1MID0gYFxuICAgICAgPGgyIGNsYXNzPVwibWwtMiBtYi0yIHRleHQteGwgZm9udC1zZW1pYm9sZFwiPlBlbHVjaGUgXCIke3RoaXMuY29udGVudC5uYW1lfVwiPC9oMj5cbiAgICAgIDxkaXYgY2xhc3M9XCJpbWFnZS1yZXNwb25zaXZlIHJvdW5kZWQteGwgb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICAgIDxpbWdcbiAgICAgICAgICBjbGFzcz1cImFic29sdXRlIGluc2V0LTAgaC1mdWxsIHctZnVsbCBvYmplY3QtY292ZXJcIlxuICAgICAgICAgIHNyYz1cIiR7dGhpcy5jb250ZW50LmltYWdlVXJsfVwiXG4gICAgICAgICAgYWx0PVwiJHt0aGlzLmNvbnRlbnQubmFtZX1cIlxuICAgICAgICAvPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiZmxleCBtdC02XCI+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwiaW5saW5lLWZsZXggZmxleC0xIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy13aGl0ZSByb3VuZGVkLW1kIHRleHQteGwgc206dGV4dC0yeGwgZm9udC1zZW1pYm9sZFwiPlxuICAgICAgICAgICR7Zm9ybWF0UHJpY2UodGhpcy5jb250ZW50LnByaWNlKX1cbiAgICAgIDwvc3Bhbj5cbiAgICAgICAgPGEgaHJlZj1cIml0ZW0uaHRtbD9pZD0ke3RoaXMuY29udGVudC5faWR9XCIgY2xhc3M9XCJpbmxpbmUtYmxvY2sgbWwtMiBweC00IHB5LTIgcm91bmRlZC1tZCBiZy1ncmF5LTIwMCBob3ZlcjpiZy1ncmF5LTMwMFwiPkTDqXRhaWxzPC9hPlxuICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgIGNsYXNzPVwianMtYnV5IGlubGluZS1ibG9jayBiZy1ibHVlLTIwMCB0ZXh0LWJsdWUtOTAwIG1sLTIgcHgtNCBweS0yIHJvdW5kZWQtbWQgaG92ZXI6YmctYmx1ZS0zMDBcIlxuICAgICAgICAgIGRhdGEtaWQ9XCIke3RoaXMuY29udGVudC5faWR9XCJcbiAgICAgICAgICBkYXRhLW5hbWU9XCIke3RoaXMuY29udGVudC5uYW1lfVwiXG4gICAgICAgICAgZGF0YS1wcmljZT1cIiR7dGhpcy5jb250ZW50LnByaWNlfVwiXG4gICAgICAgICAgZGF0YS1xdWFudGl0eT1cIjFcIlxuICAgICAgICA+XG4gICAgICAgICAgQWpvdXRlclxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxufVxuXG5cbmV4cG9ydCBjbGFzcyBDYXJkRGV0YWlscyBleHRlbmRzIENhcmQge1xuXG4gIGNvbnN0cnVjdG9yKG9iaikge1xuICAgIHN1cGVyKG9iaik7XG4gIH1cblxuICB0b0hUTUwoKSB7XG4gICAgdGhpcy50ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMudGVtcGxhdGUuY2xhc3NMaXN0LmFkZChcIm1kOmZsZXhcIiwgXCJtZDpnYXAtMTJcIik7XG5cbiAgICB0aGlzLnRlbXBsYXRlLmlubmVySFRNTCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJyZWxhdGl2ZSByb3VuZGVkLXhsIG92ZXJmbG93LWhpZGRlbiBtZDp3LTIvNFwiPlxuICAgICAgICA8aW1nIGNsYXNzPVwidy1mdWxsIGgtZnVsbCBvYmplY3QtY292ZXJcIlxuICAgICAgICAgIHNyYz1cIiR7dGhpcy5jb250ZW50LmltYWdlVXJsfVwiXG4gICAgICAgICAgYWx0PVwiJHt0aGlzLmNvbnRlbnQubmFtZX1cIlxuICAgICAgICAvPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiZmxleCBmbGV4LWNvbCBtZDp3LTIvNFwiPlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxwIGNsYXNzPVwibXQtNCBtZDptdC0wXCI+XG4gICAgICAgICAgICA8c3Ryb25nPkRlc2NyaXB0aW9uOjwvc3Ryb25nPiAke3RoaXMuY29udGVudC5kZXNjcmlwdGlvbn1cbiAgICAgICAgICA8L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwibXQtOCBmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJ0ZXh0LXNtIGZvbnQtc2VtaWJvbGRcIiBmb3I9XCJjb2xvclwiPkNvdWxldXI6PC9sYWJlbD5cbiAgICAgICAgICA8ZGl2IGlkPVwic2VsZWN0b3JcIiBjbGFzcz1cInJlbGF0aXZlIHctMS8yXCI+XG4gICAgICAgICAgICA8c2VsZWN0XG4gICAgICAgICAgICAgIGlkPVwic2VsZWN0b3JcIlxuICAgICAgICAgICAgICBjbGFzcz1cImJsb2NrIHctZnVsbCBwLTIgYXBwZWFyYW5jZS1ub25lIGJnLXRyYW5zcGFyZW50IGJvcmRlci1iXCJcbiAgICAgICAgICAgICAgbmFtZT1cImNvbG9yXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgJHt0aGlzLmNvbnRlbnQuY29sb3JzLm1hcChjb2xvciA9PiBgPG9wdGlvbiBuYW1lPVwiJHtjb2xvcn1cIj4ke2NvbG9yfTwvb3B0aW9uPmApfVxuICAgICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIG10LTZcIj5cbiAgICAgICAgICA8bGFiZWwgZm9yPVwicXVhbnRpdHlcIiBjbGFzcz1cInRleHQtc20gZm9udC1zZW1pYm9sZFwiPlF1YW50aXTDqTo8L2xhYmVsPlxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbWluPVwiMVwiIHZhbHVlPVwiMVwiIGlkPVwicXVhbnRpdHlcIiBjbGFzcz1cImpzLXF1YW50aXR5IGlubGluZS1ibG9jayB3LTEvNCBwLTIgYmctdHJhbnNwYXJlbnQgYm9yZGVyLWIgdGV4dC1jZW50ZXJcIi8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBnYXAtNCBqdXN0aWZ5LWJldHdlZW4gbXQtMTYgbGc6bXQtYXV0b1wiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaW5saW5lLWZsZXggZmxleC0xIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy13aGl0ZSByb3VuZGVkLW1kIHRleHQteGwgdGV4dC0yeGwgZm9udC1zZW1pYm9sZFwiPlxuICAgICAgICAgICAgJHtmb3JtYXRQcmljZSh0aGlzLmNvbnRlbnQucHJpY2UpfVxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgY2xhc3M9XCJqcy1idXkgaW5saW5lLWJsb2NrIGJnLWJsdWUtMjAwIHRleHQtYmx1ZS05MDAgcHgtNCBweS0yIHJvdW5kZWQtbWQgaG92ZXI6YmctYmx1ZS0zMDBcIlxuICAgICAgICAgICAgZGF0YS1pZD1cIiR7dGhpcy5jb250ZW50Ll9pZH1cIlxuICAgICAgICAgICAgZGF0YS1uYW1lPVwiJHt0aGlzLmNvbnRlbnQubmFtZX1cIlxuICAgICAgICAgICAgZGF0YS1wcmljZT1cIiR7dGhpcy5jb250ZW50LnByaWNlfVwiXG4gICAgICAgICAgICBkYXRhLXF1YW50aXR5PVwiMVwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgQWpvdXRlclxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIGBcbiAgfVxuXG59IiwiaW1wb3J0IERhdGFNYW5hZ2VyIGZyb20gJy4vbW9kdWxlcy9EYXRhTWFuYWdlcic7XG5pbXBvcnQgQ2FydE1hbmFnZXIgZnJvbSAnLi9tb2R1bGVzL0NhcnRNYW5hZ2VyJztcbmltcG9ydCB7IENhcmRQcmV2aWV3IH0gZnJvbSAnLi9jb21wb25lbnRzL0NhcmQnO1xuaW1wb3J0IHsgYW5pbWF0ZUNhcnRCdG4gfSBmcm9tICcuL3V0aWxzLmpzJztcblxuLy8gQ3JlYXRlIGNvbm5lY3Rpb24gd2l0aCBBUElcbmNvbnN0IGFwaSA9IG5ldyBEYXRhTWFuYWdlcignaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS90ZWRkaWVzJyk7XG5jb25zdCBjYXJ0ID0gbmV3IENhcnRNYW5hZ2VyKCk7XG5cbi8vIENhbGwgZmV0Y2hBbGwgbWV0aG9kIGZyb20gRGF0YU1hbmFnZXIgdG8gZ2V0IGFsbCB0aGUgaXRlbXMgYXZhaWxhYmxlIGluIHRoZSBzdG9yZVxuYXBpLmZldGNoQWxsKClcbiAgLnRoZW4oaXRlbXMgPT4ge1xuICAgIGNvbnN0IGhvbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaG9tZScpO1xuICAgIGhvbWUuaW5uZXJIVE1MID0gJyc7XG5cbiAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgLy8gQ3JlYXRlIGEgQ2FyZFByZXZpZXcgb2JqZWN0IGZvciBlYWNoIGl0ZW1zXG4gICAgICBjb25zdCBjYXJkID0gbmV3IENhcmRQcmV2aWV3KGl0ZW0pO1xuXG4gICAgICAvLyBJbmplY3QgaXQgaW50byB0aGUgRE9NXG4gICAgICBjYXJkLmluamVjdFRvKGhvbWUpO1xuXG4gICAgICAvLyBMaXN0ZW4gY2xpY2sgZXZlbnQgb24gYWRkIGJ1dHRvblxuICAgICAgY2FyZC5vbkFkZCgoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgaXRlbSA9IHtcbiAgICAgICAgICBpZDogZXZlbnQudGFyZ2V0LmRhdGFzZXQuaWQsXG4gICAgICAgICAgbmFtZTogZXZlbnQudGFyZ2V0LmRhdGFzZXQubmFtZSxcbiAgICAgICAgICBxdWFudGl0eTogcGFyc2VJbnQoZXZlbnQudGFyZ2V0LmRhdGFzZXQucXVhbnRpdHkpLFxuICAgICAgICAgIHByaWNlOiBwYXJzZUludChldmVudC50YXJnZXQuZGF0YXNldC5wcmljZSlcbiAgICAgICAgfVxuICAgICAgICAvLyBBZGQgY3VycmVudCBpdGVtIHRvIHRoZSBjYXJ0XG4gICAgICAgIGNhcnQuYWRkSXRlbShpdGVtKTtcblxuICAgICAgICAvLyBBbmltYXRlIGNhcnQgYnV0dG9uIHRvIGluZGljYXRlIHRoYXQgdGhlIGl0ZW0gaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IGFkZGVkIHRvIHRoZSBjYXJ0XG4gICAgICAgIGFuaW1hdGVDYXJ0QnRuKClcbiAgICAgIH0pXG4gICAgfSlcbiAgfSk7XG5cbiJdLCJzb3VyY2VSb290IjoiIn0=